<section class="flex">
<mat-card class="w-70 distant">
  <h2>Teilnahmen</h2>
  <div *ngIf="participations.length == 0">
    <p>Es sind keine Teilnahmen registriert.</p>
    <p>Ãœber das Formular <i>Neue Teilnahme</i> kannst du neue Registrierungen vornehmen. Diese werden dann hier
      tabellarisch aufgelistet.</p>
  </div>
  <mat-table *ngIf="participations.length > 0" [dataSource]="participations">
    <ng-container matColumnDef="_id">
      <mat-header-cell *matHeaderCellDef>ID</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row._id }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.user.firstName }} {{ row.user.lastName }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="ticket">
      <mat-header-cell *matHeaderCellDef>Gewinnlos</mat-header-cell>
      <mat-cell *matCellDef="let row">L{{ row.ticket.list }}N{{ row.ticket.number }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="start">
      <mat-header-cell *matHeaderCellDef>Beginn</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.start | date: 'dd.MM.yyyy' }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="end">
      <mat-header-cell *matHeaderCellDef>Ende</mat-header-cell>
      <mat-cell *matCellDef="let row">{{ row.end ? (row.end | date: 'dd.MM.yyyy') : 'offen' }}</mat-cell>
    </ng-container>
    <ng-container matColumnDef="actions">
      <mat-header-cell *matHeaderCellDef>Aktionen</mat-header-cell>
      <mat-cell *matCellDef="let row">
        <button class="mat-icon-button mat-primary" (click)="onInfo(row._id)">
          <span class="mat-button-wrapper">
            <mat-icon>info_outline</mat-icon>
          </span>
        </button>
        <button class="mat-icon-button mat-primary" (click)="onEnd(row._id)">
          <span class="mat-button-wrapper"><mat-icon>exit_to_app</mat-icon></span>
        </button>
        <button class="mat-icon-button mat-primary" (click)="onDelete(row._id)">
          <span class="mat-button-wrapper"><mat-icon>delete_outline</mat-icon></span>
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns" id="{{ row._id }}">
    </mat-row>
  </mat-table>
</mat-card>
  
<mat-card id="add-participation" class="w-30 distant">
  <h2>Neue Teilnahme</h2>
  <app-add-participation></app-add-participation>
</mat-card>
</section>